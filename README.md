![](https://github.com/Part001-R/assets/blob/main/assets/BlackBox.png)

# Черный ящик

При реализации различных задач автоматизации, возникает необходимость по ведению архивов состояний. Помимо базовой комплектацией СУБД, часто возникает необходимость в независимом ведении архива - черный ящик. Данное решение, позволит разработчикам систем производить анализ по достоверным данным, исключающим умышленное изменение. Проект направлен на применение в одноплатных ПК, монтируемых в непосредственной близости от оборудования. 

# Функциональные возможности

+ Архивирование данных.
+ Поддержка различных протоколов.
+ Формирование данных активности.
+ Изолированность.
+ Формирование отчётов.
+ Импорт-экспорт конфигурации.
+ Ведение системных логов.

Формирование данных активности - данные, генерируемые чёрным ящиком. Могут использоваться в технологическом оборудовании как признак готовности к работе. Таким образом соблюдается синхронность работы чёрного ящика и технологического оборудования.

# Задачи на проработку
- [X] Проработка интерфейса взаимодействия.
- [X] Протоколы:
  - [X] Реализация ведущего Modbus-TCP;
  - [X] Реализация ведущего Modbus-RTU;
- [X] PostgreSQL;
  - [X] Импорт конфигурации в БД;
  - [X] Экспорт конфигурации из БД;
  - [X] Архивирование данных.
- [ ] Предоставление ведомым, данных состояния сервера.
- [X] Формирование отчётов:
  - [X] по HTTP;
  - [X] по HTTPS.
- [ ] Тестирование. 

# Содержимое проекта
+ assents - картинки проекта.
+ cmd - точка входа (main.go).
+ configs:
  + .env - переменные окружения;
  + .gitignore - файлы игнора;
  + файлы конфигурации импорта и эксспорта.
+ docs - документация по проекту.
+ internal - пакеты проекта;
  +  database - взаимодействие с БД.
  +  libre - взаимодействие с libre.
  +  loger - взаимодействие с логером.
  +  modbusTCPmaster - взаимодействие с Modbus-TCP.

# Подготовка
1. Выполнить шаги представленные в файле - `Настройки`, раздела `docs`.

# Создание исполняемого файла
1. Перейти в директорию cmd.
2. Выполнить построение исполняемого файла: `go build main.go`.

# Запуск приложения
Приложение запускается с использованием аргументов командной строки. Конфигурация аргументов представлена в разделе `docs`, в файле `Аргументы командной строки`.
В месте расположения исполняемого файла должна находится папка `configs`, с файлом `.env,` и `import.xlsx`.

Пример запуска из корневой директории проекта с задачей по передачи содержимого конфигурационного файла в БД - `go run ./cmd main.go --do DB-import`

Результат работы приложения фиксируется в логах, расположенных в папке `StatusLog`, корневой директоии проекта. 

# Примечание
Данная стадия проекта не является функционально завершенной. 